<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scatterplot com D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      svg {
        outline: 2px solid black;
      }
      .line {
        stroke: black;
        stroke-width: 2;
      }
    </style>
  </head>
  <body>
    <svg width="500" height="600"></svg>

    <script>
      const data = [
        { nome_estacao: "MANAUS", x1: 25.5, x2: 25.8, y1: 5 },
        { nome_estacao: "MACAPA", x1: 25.8, x2: 25.8, y1: 10 },
        { nome_estacao: "FORTALEZA", x1: 25.1, x2: 25.1, y1: 15 },
        { nome_estacao: "JAGUARUANA", x1: 25.0, x2: 25.1, y1: 20 },
        { nome_estacao: "IMPERATRIZ", x1: 24.8, x2: 25.4, y1: 25 },
        { nome_estacao: "SAO LUIS", x1: 25.3, x2: 25.6, y1: 30 },
        { nome_estacao: "TURIACU", x1: 25.4, x2: 25.5, y1: 35 },
        { nome_estacao: "ZE DOCA", x1: 25.0, x2: 25.2, y1: 40 },
        { nome_estacao: "NHUMIRIM (NHECOLANDIA)", x1: 25.8, x2: 25.7, y1: 45 },
        { nome_estacao: "BELEM", x1: 25.5, x2: 25.7, y1: 50 },
        { nome_estacao: "BELTERRA", x1: 25.5, x2: 25.7, y1: 55 },
        { nome_estacao: "CAMETA", x1: 26.1, x2: 26.5, y1: 60 },
        { nome_estacao: "CONCEICAO DO ARAGUAIA", x1: 26.5, x2: 25.9, y1: 65 },
        { nome_estacao: "ITAITUBA", x1: 27.1, x2: 26.8, y1: 70 },
        { nome_estacao: "MARABA", x1: 25.5, x2: 25.6, y1: 75 },
        { nome_estacao: "OBIDOS", x1: 25.8, x2: 25.9, y1: 80 },
        { nome_estacao: "PORTO DE MOZ", x1: 26.3, x2: 26.2, y1: 85 },
        { nome_estacao: "SOURE", x1: 25.7, x2: 25.8, y1: 90 },
        { nome_estacao: "TRACUATEUA", x1: 25.7, x2: 25.5, y1: 95 },
        { nome_estacao: "JOAO PESSOA", x1: 25.0, x2: 25.2, y1: 100 },
        { nome_estacao: "PARNAIBA", x1: 25.1, x2: 25.1, y1: 105 },
        { nome_estacao: "NATAL", x1: 25.3, x2: 25.5, y1: 110 },
      ];

      // Definindo os limoites do elemento SVG
      const width = 500;
      const height = 600;
      const margin = { top: 20, right: 20, bottom: 30, left: 40 };
      const svg = d3.select("svg").attr("width", width).attr("height", height);

      // Definindo a escala com base nos dados de minimo e máximmop que são salvos no array "data"
      const xScale = d3

        .scaleLinear()
        .domain([
          d3.min(data, function (d) {
            return Math.min(d.x1, d.x2);
          }) - 1,
          d3.max(data, function (d) {
            return Math.max(d.x1, d.x2);
          }) + 1,
        ])
        .range([margin.left, width - margin.right]);

      const yScale = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return d.y1;
          }),
        ])
        .range([height - margin.bottom, margin.top]);

      // Desenhando as linhas com base nos valores de X e Y 1 e 2 para que a distribuição seja possivel
      svg
        .selectAll(".line")
        .data(data)
        .enter()
        .append("line")
        .attr("x1", (d) => xScale(d.x1))
        .attr("y1", (d) => yScale(d.y1))
        .attr("x2", (d) => xScale(d.x2))
        .attr("y2", (d) => yScale(d.y1))
        .attr("class", "line");

      // Depois das linhas criadas, incluindo pontyos de circulo com raio 3 no inicio das linhas
      svg
        .selectAll(".circle-start")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", (d) => xScale(d.x1))
        .attr("cy", (d) => yScale(d.y1))
        .attr("r", 3)
        .attr("class", "circle-start");

      // Depois das linhas criadas, incluindo pontyos de circulo com raio 3 no final das linhas
      svg
        .selectAll(".circle-end")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", (d) => xScale(d.x2))
        .attr("cy", (d) => yScale(d.y1))
        .attr("r", 3)
        .attr("class", "circle-end");
    </script>
  </body>
</html>
